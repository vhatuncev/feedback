<html lang="en"><head><style>
    .btn.btn-primary[disabled] {
        background-color: #ffffff;
        border-color: #ffffff;
        color: #afb0b5;
    }
</style>

    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">

     <!--<link rel="stylesheet" href="\fontawesome-free-5.13.0-web/css/all.css"> -->
    <!--<link rel="stylesheet" href="\fontawesome-free-5.13.0-web/css/v4-shims.css"> -->

    <title>Окошкино</title>
    <meta id="logo_meta" property="og:image" style="display: none">
</head>

<body data-new-gr-c-s-check-loaded="14.1023.0" data-gr-ext-installed="">
<div class="d-flex" style="height: 100vh; background-color: #e9ecef;">

    <div id="stars-selection" class="container" style="margin-top: 200px; margin-left: 10px; margin-right: 10px; display: none;">
        <div>
            <div class="row">
                <div class="col text-center">
                    <img id="logo_image" style="height:180px; display: none">
                    <h5 style="white-space: pre-wrap" res="rateQuality">Оцените качество сервиса</h5></div>
            </div>

            <div class="row">
                <div class="col text-center">
                    <div class="star-rating">
                        <span class="fa fa-star-o" data-rating="1"></span>
                        <span class="fa fa-star-o" data-rating="2"></span>
                        <span class="fa fa-star-o" data-rating="3"></span>
                        <span class="fa fa-star-o" data-rating="4"></span>
                        <span class="fa fa-star-o" data-rating="5"></span>
                        <input type="hidden" name="whatever1" class="rating-value" value="0">
                    </div>
                </div>
            </div>
            <div class="col text-center" style="padding-top: 50px">
                <button res="nextButton" id="star_button" class="btn btn-primary btn-lg btn-block" disabled="" onclick="starNext()">Продолжить</button>
            </div>
        </div>
    </div>
    <div id="platforms-selection" class="container" style="margin-top: 200px; margin-left: 10px; margin-right: 10px;">
        <div>
            <div class="row">
                <div class="col text-center">
                    <h5 res="chooseReviewPlatform">Пожалуйста, оставьте свой отзыв</h5></div>
            </div>
            <div class="row">
                <div class="col text-center">
                    <button type="button" class="btn btn-lg btn-primary btn-block button-container" onclick="platformSelected('https://search.google.com/local/writereview?placeid=ChIJJ55SjKj940ARz5YCtLFumMo', 'Google')">Google</button>
                </div>
            </div>
            <div class="row">
                <div class="col text-center">
                    <button type="button" class="btn btn-lg btn-light btn-block button-container" style="background-color: #ffdb4d" onclick="platformSelected('https://yandex.ru/maps/org/okoshkino/195046916240/reviews/?ll=38.901867%2C47.216906&z=19', 'Yandex')"><span style="color: #ff0000;">Я</span><span style="color: #000000;">ндекс</span></button>
                </div>
            </div>
            <div class="row">
                <div class="col text-center">
                    <button type="button" class="btn btn-lg btn-light btn-block button-container" style="background-color: #b0cb03" onclick="platformSelected('https://2gis.ru/taganrog/firm/70000001048871630/tab/reviews?writeReview', 'TwoGIS')"><span style="color: #ffffff;">2</span><span style="color: #000000;">GIS</span></button>
                </div>
            </div>
        </div>
    </div>

    <div id="feedback_form" class="container" style="margin-top: 130px; margin-left: 10px; margin-right: 10px; display: none;">
        <div>
            <div class="row" style="margin-bottom: 30px">
                <div class="col text-center">
                    <h5 res="leaveYourReview">!Пожалуйста, оставьте свой отзыв</h5></div>
            </div>
            <div>
                <div class="form-group">
                    <label for="feedback_area" res="describeVisit">Описание визита</label>
                    <textarea class="form-control" id="feedback_area" rows="3"></textarea>
                </div>
                <div class="form-group">
                    <label for="feedback_phone" res="phone">Телефон</label>
                    <input class="form-control" id="feedback_phone" aria-describedby="phone_small">
                    <small id="phone_small" class="form-text text-muted" res="feedbackDescription">Для обратной связи и получения бонусов/подарков</small>
                </div>
                <div style="padding-top: 30px">
                    <button id="submit_button" class="btn btn-primary btn-lg btn-block" disabled="" onclick="sendFeedback()" res="send">Отправить</button>
                </div>
            </div>
        </div>
    </div>

    <div id="thanks_form" class="container" style="margin-top: 200px; margin-left: 10px; margin-right: 10px; display: none;">
        <div>
            <div class="row">
                <div class="col text-center">
                    <h4 res="thanksForFeedback">Спасибо!</h4>
                </div>
            </div>
            <div class="row">
                <div class="col text-center">
                    <h5 res="yourReviewImportant">Ваш отзыв очень важен для нас</h5>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Optional JavaScript -->
<!-- jQuery first, then Popper.js, then Bootstrap JS -->
<script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>

<style>
    .button-container {
        font-weight: 500;
        margin-top: 15px;
    }

    .star-rating {
        line-height: 32px;
        font-size: 2.25em;
    }

    .star-rating .fa-star {
        color: #ffdb4d;
    }
</style>
<script>
    var $star_rating = $('.star-rating .fa');

    var SetRatingStar = function () {
        return $star_rating.each(function () {
            if (parseInt($star_rating.siblings('input.rating-value').val()) >= parseInt($(this).data('rating'))) {
                return $(this).removeClass('fa-star-o').addClass('fa-star');
            } else {
                return $(this).removeClass('fa-star').addClass('fa-star-o');
            }
        });
    };

    var raiting = 0;
    $star_rating.on('click', function () {
        raiting = $(this).data('rating');
        $star_rating.siblings('input.rating-value').val(raiting);
        SetRatingStar();

        $("#star_button").prop("disabled", false);
    });

    function starNext() {
        if (raiting == 5) {
            setTimeout(function () {
                $("#platforms-selection").show();
                $("#stars-selection").hide();
            }, 500);
        } else {
            setTimeout(function () {
                $("#feedback_form").show();
                $("#stars-selection").hide();
            }, 500);
        }
    }

    function addAnonymousReview() {
        setTimeout(function () {
            $("#feedback_form").show();
            $("#platforms-selection").hide();
        }, 500);
    }

    $('#feedback_area').on('change keypress paste focus textInput input', function () {
        updateSendButtonState()
    });
    $('#feedback_phone').on('change keypress paste focus textInput input', function () {
        updateSendButtonState()
    });


    function isNullOrEmpty(text) {
        return !text || text === "";
    }

    function updateSendButtonState() {
        const text = $("#feedback_area").val();
        const customerPhone = $("#feedback_phone").val();
        if (isNullOrEmpty(text) || isNullOrEmpty(customerPhone)) {
            $("#submit_button").prop("disabled", true);
        } else {
            $("#submit_button").prop("disabled", false);
        }
    }

    function sendFeedback() {
        const request = new XMLHttpRequest();
        const url = "https://revvy.ru" + "/r/add_feedback";
        const externalUrl = getExternalUrl();
        const json = JSON.stringify({
            mark: raiting,
            text: $("#feedback_area").val(),
            customerPhone: $("#feedback_phone").val(),
            fromUrl: externalUrl
        });
        request.open("POST", url, true)
        request.setRequestHeader('Content-type', 'application/json; charset=utf-8');
        request.send(json);

        $("#feedback_form").hide();
        $("#thanks_form").show();
    }

    function platformSelected(platform_url, platform_name) {
        const request = new XMLHttpRequest();
        const url = "https://revvy.ru" + "/r/platform_selected";
        const externalUrl = getExternalUrl();
        const json = JSON.stringify({
            platform: platform_name,
            fromUrl: externalUrl
        });
        request.onreadystatechange = function () {
            if (request.readyState === 4) {
                window.open(platform_url, "_self");
            }
        }
        request.open("POST", url, true)
        request.setRequestHeader('Content-type', 'application/json; charset=utf-8');
        request.send(json);
    }

    function getExternalUrl() {
        const splitedUrl = window.location.href.split('/');
        return splitedUrl[splitedUrl.length - 1];
    }

    const localization = {"rateQuality":"Оцените качество сервиса","nextButton":"Продолжить","leaveYourReview":"Пожалуйста, оставьте свой отзыв","chooseReviewPlatform":"Пожалуйста, оставьте свой отзыв","describeVisit":"Описание визита","phone":"Телефон","feedbackDescription":"Для обратной связи и получения бонусов/подарков","send":"Отправить","thanksForFeedback":"Спасибо!","yourReviewImportant":"Ваш отзыв очень важен для нас"};

    function localize() {
        for (var key in localization) {
            $('[res=' + key + ']').text(localization[key]);
        }
    }

    localize();

    var notShowStars = true;
    if (notShowStars) {
        $("#platforms-selection").show();
        $("#stars-selection").hide();
    } else {
        SetRatingStar();
    }

    var logoUrl = '';
    if (!isNullOrEmpty(logoUrl)) {
        $("#stars-selection").css('margin-top', '100px');
        $("#logo_image").attr("src", logoUrl);
        $("#logo_image").show();
        $("#logo_meta").attr("content", logoUrl);
        $("#logo_meta").show();
    }

</script>

</body><grammarly-desktop-integration data-grammarly-shadow-root="true"></grammarly-desktop-integration></html>
